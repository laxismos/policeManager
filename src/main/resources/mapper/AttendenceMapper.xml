<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="net.base.open.mapper.AttendenceMapper">
    <resultMap id="attendence" type="net.base.open.entity.Attendence">
        <result property="Ainfo" column="Ainfomation" javaType="String"/>
    </resultMap>

    <!-- addAttendence --> 

    <insert id="addAttendence">
        INSERT INTO ATTENDENCES 
        (Adate,Aname,Ainfomation)
        VALUES
        (#{Adate},#{Aname},#{Ainfo})
    </insert>    

    <select id="getAttendences">
        SELECT * FROM ATTENDENCES
        <where>
            <if test="s_Adate != null">
                Adate &gt;= #{s_Adate}
            </if>
            <if test="e_Adate != null">
                AND Adate &lt;= #{e_Adate}
            </if>
            <if test="Aname != null">
                AND Aname = #{Aname}
            </if>
        </where>
        LIMIT #{offset},#{limit}
    </select>

    <update id="updateAttendence">
        UPDATE ATTENDENCES SET Ainfo = #{Ainfo}
        <where>
            <if test="Adate != null">
                Adate = #{Adate}
            </if>
            <if test="Aname != null">
                AND Aname = #{Aname}
            </if>
        </where>
    </update>

    <delete id="deleteAttendence">
        DELETE FROM ATTENDENCES WHERE Adata = #{Adate} 
    </delete>
</mapper>